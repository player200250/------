<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>編輯員工資料</title>
    <style>
        /* 停用頁面的質感風格 */
        body {
            background-color: #f5f5f5;
            font-family: "Microsoft JhengHei", sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .form-card {
            background: #ffffff;
            width: 90%;
            max-width: 600px;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        .form-title {
            color: #c2185b;
            font-size: 1.6rem;
            margin-bottom: 25px;
            border-bottom: 2px solid #fce4ec;
            padding-bottom: 15px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .form-group { margin-bottom: 15px; }
        .form-group.full { grid-column: span 2; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #333; }
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-sizing: border-box;
        }
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        .btn-save {
            flex: 2;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }
        .btn-cancel {
            flex: 1;
            background-color: #eeeeee;
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="form-card">
        <h2 class="form-title">｜編輯員工資料</h2>
        <form id="edit-form" class="form-grid">
            <div class="form-group">
                <label>員工編號 (不可修改)</label>
                <input type="text" id="edit-id" readonly style="background:#f9f9f9;">
            </div>
            <div class="form-group">
                <label>員工姓名</label>
                <input type="text" id="edit-name">
            </div>
            <div class="form-group">
                <label>性別</label>
                <select id="edit-gender">
                    <option value="男">男</option>
                    <option value="女">女</option>
                </select>
            </div>
            <div class="form-group">
                <label>電話</label>
                <input type="text" id="edit-phone">
            </div>
            <div class="form-group full">
                <label>電子信箱</label>
                <input type="email" id="edit-email">
            </div>
            <div class="form-actions full">
                <button type="button" class="btn-save" onclick="saveEdit()">儲存變更</button>
                <button type="button" class="btn-cancel" onclick="location.href='employee.html'">取消</button>
            </div>
        </form>
    </div>

    <script>
        // 1. 頁面載入：抓取 ID 並填入資料
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const empId = params.get('id');
            const employees = JSON.parse(localStorage.getItem('myEmployees')) || [];
            const emp = employees.find(e => e.id === empId);

            if (emp) {
                document.getElementById('edit-id').value = emp.id;
                document.getElementById('edit-name').value = emp.name;
                document.getElementById('edit-gender').value = emp.gender || '男';
                document.getElementById('edit-phone').value = emp.phone || '';
                document.getElementById('edit-email').value = emp.email || '';
            }
        });

        // 2. 儲存編輯：更新 LocalStorage
        function saveEdit() {
            const empId = document.getElementById('edit-id').value;
            let employees = JSON.parse(localStorage.getItem('myEmployees')) || [];
            const index = employees.findIndex(e => e.id === empId);

            if (index !== -1) {
                employees[index].name = document.getElementById('edit-name').value;
                employees[index].gender = document.getElementById('edit-gender').value;
                employees[index].phone = document.getElementById('edit-phone').value;
                employees[index].email = document.getElementById('edit-email').value;

                localStorage.setItem('myEmployees', JSON.stringify(employees));
                alert('資料更新成功！');
                window.location.href = 'employee.html';
            }
        }
    </script>
</body>
</html>